<div align="center">

<img height="160" src="https://github.com/AIDotNet/Thor/assets/61819790/a3eb7557-0ff4-4edd-a472-e5a0a745616d">

# Thor(é›·ç¥æ‰˜å°”) - AIå¤§æ¨¡å‹ç®¡ç†ç½‘å…³

[![License](https://img.shields.io/github/license/AIDotNet/Thor)](LICENSE)
[![Stars](https://img.shields.io/github/stars/AIDotNet/Thor)](https://github.com/AIDotNet/Thor/stargazers)
[![Issues](https://img.shields.io/github/issues/AIDotNet/Thor)](https://github.com/AIDotNet/Thor/issues)
[![Docker](https://img.shields.io/docker/v/aidotnet/thor)](https://hub.docker.com/r/aidotnet/thor)

**Thor(é›·ç¥æ‰˜å°”)** æ˜¯ä¸€æ¬¾ä¼ä¸šçº§AIå¤§æ¨¡å‹ç®¡ç†ç½‘å…³ï¼Œæä¾›ç»Ÿä¸€çš„APIæ¥å£æ¥ç®¡ç†å’Œè°ƒåº¦å¤šç§AIå¤§æ¨¡å‹ã€‚æ”¯æŒOpenAIå…¼å®¹æ ¼å¼ï¼Œå…·å¤‡å®Œå–„çš„ç”¨æˆ·ç®¡ç†ã€æ¸ é“ç®¡ç†ã€è®¡è´¹å’Œç›‘æ§åŠŸèƒ½ã€‚

</div>

## ğŸš€ æ ¸å¿ƒç‰¹æ€§

- **ğŸ”§ ç»Ÿä¸€ç®¡ç†**: æ”¯æŒ20+ AIå¤§æ¨¡å‹çš„ç»Ÿä¸€æ¥å…¥å’Œç®¡ç†
- **ğŸ’° æ™ºèƒ½è®¡è´¹**: ç²¾ç¡®çš„tokenè®¡è´¹ç³»ç»Ÿï¼Œæ”¯æŒç¼“å­˜è®¡è´¹ä¼˜åŒ–
- **ğŸ“Š å®æ—¶ç›‘æ§**: è¯¦ç»†çš„ä½¿ç”¨ç»Ÿè®¡å’Œæ€§èƒ½ç›‘æ§
- **ğŸ” æƒé™æ§åˆ¶**: å®Œå–„çš„ç”¨æˆ·ç®¡ç†å’Œè®¿é—®æ§åˆ¶
- **âš¡ é«˜æ€§èƒ½**: æ”¯æŒåˆ†å¸ƒå¼ç¼“å­˜å’Œè´Ÿè½½å‡è¡¡
- **ğŸ³ æ˜“éƒ¨ç½²**: æ”¯æŒDockerä¸€é”®éƒ¨ç½²

## ğŸ“ˆ æ•°æ®å¯è§†åŒ–

![æ•°æ®ç»Ÿè®¡é¢„è§ˆ](https://github.com/user-attachments/assets/eb508d89-6834-4064-95c2-937c939ddbd7)

## ğŸ“‹ åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½
- âœ… **ç”¨æˆ·ç®¡ç†** - å®Œæ•´çš„ç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€æƒé™æ§åˆ¶ä½“ç³»
- âœ… **æ¸ é“ç®¡ç†** - å¤šAIæœåŠ¡å•†çš„ç»Ÿä¸€æ¥å…¥å’Œç®¡ç†
- âœ… **Tokenç®¡ç†** - APIå¯†é’¥çš„ç”Ÿæˆã€åˆ†å‘å’Œæƒé™æ§åˆ¶
- âœ… **æ™ºèƒ½è®¡è´¹** - ç²¾ç¡®çš„tokenè®¡è´¹ï¼Œæ”¯æŒç¼“å­˜è®¡è´¹ä¼˜åŒ–
- âœ… **æ•°æ®ç»Ÿè®¡** - å®æ—¶ä½¿ç”¨ç»Ÿè®¡å’Œå¯è§†åŒ–æŠ¥è¡¨
- âœ… **æ—¥å¿—å®¡è®¡** - å®Œæ•´çš„APIè°ƒç”¨æ—¥å¿—å’Œé”™è¯¯è¿½è¸ª
- âœ… **ç³»ç»Ÿé…ç½®** - çµæ´»çš„ç³»ç»Ÿå‚æ•°é…ç½®
- âœ… **æ”¯ä»˜é›†æˆ** - æ”¯ä»˜å®šä½™é¢å……å€¼åŠŸèƒ½

### é«˜çº§ç‰¹æ€§
- âœ… **ç¼“å­˜ä¼˜åŒ–** - æ”¯æŒRedisåˆ†å¸ƒå¼ç¼“å­˜
- âœ… **è´Ÿè½½å‡è¡¡** - æ™ºèƒ½æ¸ é“é€‰æ‹©å’Œæ•…éšœè½¬ç§»
- âœ… **é™æµæ§åˆ¶** - åŸºäºç”¨æˆ·ç»„çš„APIé™æµç­–ç•¥
- âœ… **å®æ—¶ç›‘æ§** - ç³»ç»Ÿæ€§èƒ½å’Œè°ƒç”¨ç›‘æ§
- âœ… **å¤šè¯­è¨€æ”¯æŒ** - ä¸­è‹±æ–‡ç•Œé¢åˆ‡æ¢

## ğŸ¤– æ”¯æŒçš„AIå¤§æ¨¡å‹

### OpenAIå…¼å®¹æ¨¡å‹
- âœ… **OpenAI GPTç³»åˆ—** (æ”¯æŒFunction Calling)
- âœ… **Azure OpenAI** (æ”¯æŒFunction Calling)
- âœ… **Kimi (æœˆä¹‹æš—é¢)** (æ”¯æŒFunction Calling)
- âœ… **DeepSeek** (æ”¯æŒFunction Calling)
- âœ… **Claude (Anthropic)** (æ”¯æŒç¼“å­˜è®¡è´¹ä¼˜åŒ–)

### å›½å†…å¤§æ¨¡å‹
- âœ… **ç™¾åº¦æ–‡å¿ƒä¸€è¨€ (ErnieBot)** (æ”¯æŒFunction Calling)
- âœ… **é˜¿é‡Œé€šä¹‰åƒé—®** (æ”¯æŒFunction Calling)
- âœ… **è…¾è®¯æ··å…ƒå¤§æ¨¡å‹** (æ”¯æŒFunction Calling)
- âœ… **æ™ºè°±AI GLMç³»åˆ—** (æ”¯æŒFunction Calling)
- âœ… **è®¯é£æ˜Ÿç«å¤§æ¨¡å‹** (æ”¯æŒFunction Calling)

### å¼€æºæ¨¡å‹
- âœ… **Ollama** (æœ¬åœ°éƒ¨ç½²å¼€æºæ¨¡å‹)
- âœ… **SiliconFlow** (å¼€æºæ¨¡å‹èšåˆå¹³å°)

### äº‘æœåŠ¡å•†
- âœ… **ç«å±±å¼•æ“** (å­—èŠ‚è·³åŠ¨äº‘æœåŠ¡)
- âœ… **äºšé©¬é€ŠBedrock** (AWS AIæœåŠ¡)
- âœ… **è°·æ­ŒVertex AI** (GCP AIæœåŠ¡)
- âœ… **Gitee AI** (ç äº‘AIå¹³å°)
- âœ… **MiniMax AI** (å•†æ±¤ç§‘æŠ€)

## ğŸ—„ï¸ æ”¯æŒçš„æ•°æ®åº“

| æ•°æ®åº“ç±»å‹ | é…ç½®å€¼ | è¯´æ˜ |
|-----------|--------|------|
| SQLite | `sqlite` | è½»é‡çº§åµŒå…¥å¼æ•°æ®åº“ï¼Œé»˜è®¤é€‰é¡¹ |
| PostgreSQL | `postgresql` / `pgsql` | ä¼ä¸šçº§å¼€æºæ•°æ®åº“ |
| SQL Server | `sqlserver` / `mssql` | å¾®è½¯ä¼ä¸šçº§æ•°æ®åº“ |
| MySQL | `mysql` | æœ€æµè¡Œçš„å¼€æºæ•°æ®åº“ |
| è¾¾æ¢¦æ•°æ®åº“ | `dm` | å›½äº§ä¼ä¸šçº§æ•°æ®åº“ |

> ğŸ’¡ ä¿®æ”¹`appsettings.json`çš„`ConnectionStrings:DBType`é…ç½®é¡¹å³å¯åˆ‡æ¢æ•°æ®åº“ç±»å‹ã€‚åˆ‡æ¢æ•°æ®åº“ä¸ä¼šè‡ªåŠ¨è¿ç§»æ•°æ®ã€‚

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```mermaid
graph TB
    subgraph "ç”¨æˆ·å±‚"
        U[ç”¨æˆ·/å®¢æˆ·ç«¯]
        U -->|API Key| T[Thorç½‘å…³]
    end
    
    subgraph "Thoræ ¸å¿ƒ"
        T -->|è´Ÿè½½å‡è¡¡| CM[æ¸ é“ç®¡ç†]
        T -->|æƒé™éªŒè¯| UM[ç”¨æˆ·ç®¡ç†]
        T -->|è®¡è´¹ç»Ÿè®¡| BS[è®¡è´¹ç³»ç»Ÿ]
        T -->|æ—¥å¿—è®°å½•| LS[æ—¥å¿—ç³»ç»Ÿ]
    end
    
    subgraph "AIæœåŠ¡å•†"
        CM -->|OpenAIæ ¼å¼| O[OpenAI]
        CM -->|Azureæ ¼å¼| AZ[Azure OpenAI]
        CM -->|Claudeæ ¼å¼| C[Anthropic]
        CM -->|å›½å†…API| CN[ç™¾åº¦/é˜¿é‡Œ/è…¾è®¯]
        CM -->|å¼€æºæ¨¡å‹| OS[Ollama/SiliconFlow]
    end
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®æ¡ä»¶
- Docker 20.10+
- è‡³å°‘ 1GB å¯ç”¨å†…å­˜
- 500MB ç£ç›˜ç©ºé—´

### 1. ä½¿ç”¨Dockerä¸€é”®å¯åŠ¨

```bash
# åˆ›å»ºæ•°æ®ç›®å½•
mkdir -p ./data

# å¯åŠ¨æœåŠ¡
docker run -d \
  --name thor \
  -p 18080:8080 \
  -v $(pwd)/data:/data \
  -e TZ=Asia/Shanghai \
  -e DBType=sqlite \
  -e ConnectionStrings:DefaultConnection="data source=/data/token.db" \
  -e ConnectionStrings:LoggerConnection="data source=/data/logger.db" \
  -e RunMigrationsAtStartup=true \
  aidotnet/thor:latest
```

### 2. è®¿é—®ç³»ç»Ÿ
- **ç®¡ç†åå°**: http://localhost:18080
- **é»˜è®¤è´¦å·**: `admin`
- **é»˜è®¤å¯†ç **: `admin`

### 3. é…ç½®ç¬¬ä¸€ä¸ªAIæ¸ é“
1. ç™»å½•ç®¡ç†åå°
2. è¿›å…¥"æ¸ é“ç®¡ç†"é¡µé¢
3. ç‚¹å‡»"æ–°å»ºæ¸ é“"
4. é€‰æ‹©AIæœåŠ¡å•†å¹¶å¡«å†™APIå¯†é’¥
5. ä¿å­˜å¹¶æµ‹è¯•è¿æ¥

## ğŸ“‹ ç¯å¢ƒå‘é‡é…ç½®

| å˜é‡å | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|--------|------|--------|
| `DBType` | æ•°æ®åº“ç±»å‹ | `sqlite` / `postgresql` / `mysql` / `sqlserver` |
| `ConnectionStrings:DefaultConnection` | ä¸»æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸² | `data source=/data/token.db` |
| `ConnectionStrings:LoggerConnection` | æ—¥å¿—æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸² | `data source=/data/logger.db` |
| `CACHE_TYPE` | ç¼“å­˜ç±»å‹ | `Memory` / `Redis` |
| `CACHE_CONNECTION_STRING` | Redisè¿æ¥å­—ç¬¦ä¸² | `localhost:6379` |
| `HttpClientPoolSize` | HTTPè¿æ¥æ± å¤§å° | `100` |
| `RunMigrationsAtStartup` | å¯åŠ¨æ—¶è¿è¡Œæ•°æ®åº“è¿ç§» | `true` |

## ğŸ³ Docker Composeé…ç½®

### SQLiteç‰ˆæœ¬ï¼ˆæ¨èæ–°æ‰‹ï¼‰
```yaml
version: '3.8'
services:
  thor:
    image: aidotnet/thor:latest
    ports:
      - "18080:8080"
    volumes:
      - ./data:/data
    environment:
      - TZ=Asia/Shanghai
      - DBType=sqlite
      - ConnectionStrings:DefaultConnection=data source=/data/token.db
      - ConnectionStrings:LoggerConnection=data source=/data/logger.db
      - RunMigrationsAtStartup=true
```

### PostgreSQLç‰ˆæœ¬ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
```yaml
version: '3.8'
services:
  postgres:
    image: postgres:15
    environment:
      POSTGRES_DB: thor
      POSTGRES_USER: thor
      POSTGRES_PASSWORD: thor123
    volumes:
      - postgres_data:/var/lib/postgresql/data

  thor:
    image: aidotnet/thor:latest
    ports:
      - "18080:8080"
    depends_on:
      - postgres
    environment:
      - TZ=Asia/Shanghai
      - DBType=postgresql
      - ConnectionStrings:DefaultConnection=Host=postgres;Port=5432;Database=thor;Username=thor;Password=thor123
      - ConnectionStrings:LoggerConnection=Host=postgres;Port=5432;Database=thor_logger;Username=thor;Password=thor123
      - RunMigrationsAtStartup=true

volumes:
  postgres_data:
```

## ğŸ”§ å¼€å‘ç¯å¢ƒæ­å»º

### å‰ç½®è¦æ±‚
- .NET 8.0 SDK
- Node.js 18+
- Git

### æœ¬åœ°å¼€å‘æ­¥éª¤
```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/AIDotNet/Thor.git
cd Thor

# è¿˜åŸä¾èµ–
dotnet restore

# å¯åŠ¨åç«¯æœåŠ¡
cd src/Thor.Service
dotnet run --urls "http://localhost:5000"

# å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨ï¼ˆæ–°ç»ˆç«¯ï¼‰
cd lobe
npm install
npm run dev
```

## ğŸ“Š APIä½¿ç”¨ç¤ºä¾‹

### OpenAIå…¼å®¹æ¥å£
```bash
# èŠå¤©è¡¥å…¨
curl -X POST http://localhost:18080/v1/chat/completions \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -d '{
    "model": "gpt-3.5-turbo",
    "messages": [{"role": "user", "content": "Hello!"}]
  }'

# æ–‡æœ¬è¡¥å…¨
curl -X POST http://localhost:18080/v1/completions \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -d '{
    "model": "text-davinci-003",
    "prompt": "Once upon a time",
    "max_tokens": 100
  }'
```

## ğŸ› ï¸ å¸¸è§é—®é¢˜

### Q: å¦‚ä½•é‡ç½®ç®¡ç†å‘˜å¯†ç ï¼Ÿ
A: åˆ é™¤æ•°æ®åº“ä¸­çš„ç”¨æˆ·è¡¨è®°å½•ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨é‡æ–°åˆ›å»ºé»˜è®¤ç®¡ç†å‘˜è´¦å·ã€‚

### Q: æ”¯æŒå“ªäº›AIæ¨¡å‹ï¼Ÿ
A: æ”¯æŒæ‰€æœ‰OpenAIå…¼å®¹æ ¼å¼çš„æ¨¡å‹ï¼ŒåŒ…æ‹¬GPT-3.5ã€GPT-4ã€Claudeã€æ–‡å¿ƒä¸€è¨€ç­‰ã€‚

### Q: å¦‚ä½•é…ç½®HTTPSï¼Ÿ
A: å»ºè®®ä½¿ç”¨Nginxåå‘ä»£ç†é…ç½®HTTPSï¼ŒThoræœ¬èº«ä¸“æ³¨äºAPIç½‘å…³åŠŸèƒ½ã€‚

### Q: æ•°æ®åº“åˆ‡æ¢åæ•°æ®ä¼šä¸¢å¤±å—ï¼Ÿ
A: åˆ‡æ¢æ•°æ®åº“ç±»å‹ä¸ä¼šè‡ªåŠ¨è¿ç§»æ•°æ®ï¼Œå»ºè®®å¤‡ä»½åæ‰‹åŠ¨è¿ç§»ã€‚

## ğŸ“ æŠ€æœ¯æ”¯æŒ

- **GitHub Issues**: [æäº¤é—®é¢˜](https://github.com/AIDotNet/Thor/issues)
- **æ–‡æ¡£**: [æŸ¥çœ‹è¯¦ç»„æ–‡æ¡£](https://github.com/AIDotNet/Thor/wiki)
- **ç¤¾åŒº**: [åŠ å…¥è®¨è®º](https://github.com/AIDotNet/Thor/discussions)

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤Issueå’ŒPull Requestæ¥å¸®åŠ©æ”¹è¿›Thorï¼

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. åˆ›å»º Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®åŸºäº [MIT License](LICENSE) å¼€æºåè®¤ã€‚